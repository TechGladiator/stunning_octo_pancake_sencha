{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "OctoPancakeControl"
    },
    "configAlternates": {
        "designer|userClassName": "string"
    },
    "name": "MyController",
    "designerId": "d4d1c18f-2991-4b5a-87be-fb289b2ba215",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "r"
                ],
                "fn": "setResults",
                "implHandler": [
                    "this.getApplication().FullResults = r;",
                    "this.getApplication().FieldNames = this.getApplication().FullResults.meta.fields;",
                    "this.getApplication().FieldData = this.getApplication().FullResults.data;",
                    "this.getApplication().FieldErrors = this.getApplication().FullResults.errors;",
                    "this.getApplication().ErrorCount = this.getApplication().FieldErrors.length;",
                    "this.getApplication().FirstError = this.getApplication().FieldErrors[0];",
                    "this.getApplication().RowCount = this.getApplication().FieldData.length;"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "setResults",
            "designerId": "0cbf402f-9afd-4250-9145-a225464c2528"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "msg"
                ],
                "fn": "printStats",
                "implHandler": [
                    "console.log(msg);",
                    "console.log(this.getApplication().FirstError || 'No column length errors');",
                    "console.log(\"  Row count:\", this.getApplication().RowCount);",
                    "console.log(\"     Errors:\", this.getApplication().ErrorCount);",
                    "console.log(\"    Results:\", this.getApplication().FullResults);"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "printStats",
            "designerId": "fe0b5bd9-5c5c-42b8-8fe6-16d77912eabf"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fn",
                    "fd",
                    "ec"
                ],
                "fn": "validateFieldLength",
                "implHandler": [
                    "if (fn.length != this.getApplication().Names.length) {",
                    "    console.log(\"header length is wrong\");",
                    "    let codeWord;",
                    "    if (fn.length < this.getApplication().Names.length) {",
                    "      codeWord = \"few\";",
                    "    } else {",
                    "      codeWord = \"many\";",
                    "    }",
                    "    alert(`Too ${codeWord} fields: expected ${this.getApplication().Names.length} fields but parsed ${fn.length} in \"${this.getApplication().Filename}\", Row: 0. Header length errors must be corrected within file before further processing to prevent data loss.`);",
                    "} else {",
                    "    this.validateRowLengths(fd, ec);",
                    "}"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "validateFieldLength",
            "designerId": "63c6526c-e934-4816-a5de-530e0a78a8a0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fd"
                ],
                "fn": "setView",
                "implHandler": [
                    "Ext.StoreMgr.get('RecordDataStore').clearData();",
                    "Ext.getCmp('importFileName').setTitle(this.getApplication.Filename);",
                    "Ext.getCmp('editImportFileName').setTitle(this.getApplication.Filename);",
                    "Ext.getCmp('recordButtons').show();",
                    "Ext.getCmp('importFileName').show();",
                    "Ext.getCmp('tabs').hide();",
                    "Ext.StoreMgr.get('RecordDataStore').setData(fd);",
                    "if (fd[0].__parsed_extra) {",
                    "    Ext.getCmp('extra').show();",
                    "    Ext.getCmp('extra1').show();",
                    "}"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "setView",
            "designerId": "fcd8d2f5-a590-4de8-85ad-ecd7995e21b0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fd",
                    "ec"
                ],
                "fn": "validateRowLengths",
                "implHandler": [
                    "if (ec > 0) {",
                    "    const message = this.getApplication.FirstError.message;",
                    "    const row = this.getApplication.FirstError.row;",
                    "    alert(`First error: ${message} in Row: ${row + 1}`);",
                    "    Ext.getCmp('mapData').hide();",
                    "    Ext.getCmp('repairNext').show();",
                    "    this.setView([fd[row]]);",
                    "} else {",
                    "    Ext.getCmp('mapData').show();",
                    "    Ext.getCmp('repairNext').hide();",
                    "    this.setView(fd);",
                    "}"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "validateRowLengths",
            "designerId": "509c9326-b56b-452a-aab3-cfc90c9d513e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "results"
                ],
                "fn": "completeFn",
                "implHandler": [
                    "this.setResults(results);",
                    "this.printStats('Parse complete');",
                    "this.validateFieldLength(this.getApplication().FieldNames, this.getApplication().FieldData, this.getApplication().ErrorCount);"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "completeFn",
            "designerId": "e4bdb401-60a1-43e5-9c82-a42cc33165e7"
        }
    ]
}