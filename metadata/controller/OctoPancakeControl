{
    "type": "Ext.app.Controller",
    "reference": {
        "name": "items",
        "type": "array"
    },
    "codeClass": null,
    "userConfig": {
        "designer|userClassName": "OctoPancakeControl"
    },
    "configAlternates": {
        "designer|userClassName": "string"
    },
    "name": "MyController",
    "designerId": "d4d1c18f-2991-4b5a-87be-fb289b2ba215",
    "cn": [
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "value",
                    "metaData"
                ],
                "fn": "validateState",
                "implHandler": [
                    "const states = [\"AL\", \"AK\", \"AS\", \"AZ\", \"AR\", \"CA\", \"CO\", \"CT\", \"DE\", \"DC\", \"FM\", \"FL\", \"GA\", \"GU\", \"HI\", \"ID\", \"IL\", \"IN\", \"IA\", \"KS\", \"KY\", \"LA\", \"ME\", \"MH\", \"MD\", \"MA\", \"MI\", \"MN\", \"MS\", \"MO\", \"MP\", \"MT\", \"NE\", \"NV\", \"NH\", \"NJ\", \"NM\", \"NY\", \"NC\", \"ND\", \"MP\", \"OH\", \"OK\", \"OR\", \"PW\", \"PA\", \"PR\", \"RI\", \"SC\", \"SD\", \"TN\", \"TX\", \"UT\", \"VT\", \"VI\", \"VA\", \"WA\", \"WV\", \"WI\", \"WY\"];",
                    "",
                    "let validState = false;",
                    "",
                    "for (let i = 0; i < states.length; i++) {",
                    "    if (value === states[i]) {",
                    "        validState = true;",
                    "        break;",
                    "    }",
                    "}",
                    "if (!validState) {",
                    "    metaData.innerCls = 'invalidCell';",
                    "}",
                    "return value;"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "validateState",
            "designerId": "59a0a398-cb67-4c8f-98ce-f9192c6f9f69"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fd",
                    "file"
                ],
                "fn": "setView",
                "implHandler": [
                    "Ext.StoreMgr.get('RecordDataStore').clearData();",
                    "Ext.getCmp('importFileName').setTitle(file);",
                    "Ext.getCmp('editImportFileName').setTitle(file);",
                    "Ext.getCmp('recordButtons').show();",
                    "Ext.getCmp('importFileName').show();",
                    "Ext.getCmp('tabs').hide();",
                    "Ext.StoreMgr.get('RecordDataStore').setData(fd);",
                    "if (fd[0].__parsed_extra) {",
                    "    Ext.getCmp('extra').show();",
                    "    Ext.getCmp('extra1').show();",
                    "}"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "setView",
            "designerId": "fcd8d2f5-a590-4de8-85ad-ecd7995e21b0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fd",
                    "ec",
                    "fe",
                    "file"
                ],
                "fn": "validateRowLengths",
                "implHandler": [
                    "if (ec > 0) {",
                    "    const message = fe.message;",
                    "    const row = fe.row;",
                    "    alert(`Error: ${message} in Row: ${row + 1}`);",
                    "    Ext.getCmp('mapData').hide();",
                    "    Ext.getCmp('repairNext').show();",
                    "    this.setView([fd[row]], file);",
                    "} else {",
                    "    Ext.getCmp('mapData').show();",
                    "    Ext.getCmp('repairNext').hide();",
                    "    this.setView(fd, file);",
                    "}"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "validateRowLengths",
            "designerId": "509c9326-b56b-452a-aab3-cfc90c9d513e"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fn",
                    "n",
                    "fd",
                    "ec",
                    "fe",
                    "file"
                ],
                "fn": "validateFieldNames",
                "implHandler": [
                    "for (let i = 0; i < fn.length; i ++) {",
                    "    const oldKey = fn[i];",
                    "    fn[i] = n[i];",
                    "    const newKey = fn[i];",
                    "    if (oldKey != newKey) {",
                    "        let j = 0;",
                    "        while (j < fd.length) {",
                    "            const e = fd[j];",
                    "            e[newKey] = e[oldKey];",
                    "            delete e[oldKey];",
                    "            j++;",
                    "        }",
                    "        alert(`Corrected invalid column ${oldKey} to ${newKey}`);",
                    "    }",
                    "}",
                    "this.validateRowLengths(fd, ec, fe, file);"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "validateFieldNames",
            "designerId": "eb4c3562-3576-44b7-9dbf-ad23cc79f0cf"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "fn",
                    "n",
                    "fd",
                    "ec",
                    "fe",
                    "file"
                ],
                "fn": "validateFieldLength",
                "implHandler": [
                    "if (fn.length != n.length) {",
                    "    console.log(\"header length is wrong\");",
                    "    let codeWord;",
                    "    if (fn.length < n.length) {",
                    "        codeWord = \"few\";",
                    "    } else {",
                    "        codeWord = \"many\";",
                    "    }",
                    "    alert(`Too ${codeWord} fields: expected ${n.length} fields but parsed ${fn.length} in \"${file}\", Row: 0. Header length errors must be corrected within file before further processing to prevent data loss.`);",
                    "} else {",
                    "    this.validateFieldNames(fn, n, fd, ec, fe, file);",
                    "}"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "validateFieldLength",
            "designerId": "63c6526c-e934-4816-a5de-530e0a78a8a0"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "msg",
                    "app"
                ],
                "fn": "printStats",
                "implHandler": [
                    "console.log(msg);",
                    "console.log(this.getApplication().FirstError || 'No column length errors');",
                    "console.log(\"  Row count:\", app.RowCount);",
                    "console.log(\"     Errors:\", app.ErrorCount);",
                    "console.log(\"    Results:\", app.FullResults);"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "printStats",
            "designerId": "fe0b5bd9-5c5c-42b8-8fe6-16d77912eabf"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "app",
                    "r"
                ],
                "fn": "setResults",
                "implHandler": [
                    "app.FullResults = r;",
                    "app.FieldNames = app.FullResults.meta.fields;",
                    "app.FieldData = app.FullResults.data;",
                    "app.FieldErrors = app.FullResults.errors;",
                    "app.ErrorCount = app.FieldErrors.length;",
                    "app.FirstError = app.FieldErrors[0];",
                    "app.RowCount = app.FieldData.length;"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "setResults",
            "designerId": "0cbf402f-9afd-4250-9145-a225464c2528"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "results"
                ],
                "fn": "completeFn",
                "implHandler": [
                    "const app = StunningOctoPancake.app;",
                    "const controller = app.getOctoPancakeControlController();",
                    "",
                    "controller.setResults(app, results);",
                    "controller.printStats('Parse complete', app);",
                    "controller.validateFieldLength(app.FieldNames, app.Names, app.FieldData, app.ErrorCount, app.FirstError, app.FileName);"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "completeFn",
            "designerId": "e4bdb401-60a1-43e5-9c82-a42cc33165e7"
        },
        {
            "type": "basicfunction",
            "reference": {
                "name": "items",
                "type": "array"
            },
            "codeClass": null,
            "userConfig": {
                "designer|params": [
                    "err",
                    "file"
                ],
                "fn": "errorFn",
                "implHandler": [
                    "console.log('ERROR:', err, file);"
                ]
            },
            "configAlternates": {
                "designer|params": "typedarray",
                "fn": "string",
                "implHandler": "code"
            },
            "name": "errorFn",
            "designerId": "c08e145f-667e-499c-9ec2-ee93e3e985e1"
        }
    ]
}